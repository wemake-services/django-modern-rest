# All configuration for plugins and other utils is defined here.
# Read more about `setup.cfg`:
# https://docs.python.org/3.11/distutils/configfile.html

[flake8]
# Base flake8 configuration:
# https://flake8.pycqa.org/en/latest/user/configuration.html
format = wemake
show-source = true
statistics = false
doctests = true

# Plugins:
max-complexity = 6
max-line-length = 80
max-imports = 25

# We only run wemake-python-styleguide and system checks:
select = WPS, E99

ignore =
  # It will be removed in wps@1.5
  WPS354
  # Allow logic in `__init__`
  WPS412

# Excluding some directories:
extend-exclude =
  .venv
  # We don't care about style in purposely junk code:
  typesafety
  # We don't care about style of benchmark apps:
  benchmarks
  # Artifacts:
  docs/_build

# Ignoring some errors in some files:
per-file-ignores =
  # Having many components is fine:
  django_modern_rest/components.py: WPS202
  # Allow many imported names from a modules. Also allow wrong variables
  # names for to comply with the openapi convention (as `item`, `info`, etc):
  django_modern_rest/openapi/objects/*.py: WPS201, WPS110
  # We have complex modules with a lot of quircks:
  django_modern_rest/endpoint.py: WPS203, WPS402
  django_modern_rest/validation/endpoint_metadata.py: WPS402
  # It is fine to have many exceptions:
  django_modern_rest/exceptions.py: WPS202
  # Our test client has some autogenerated code:
  django_modern_rest/test.py: WPS475, WPS110
  # Disable some lints for test settings:
  django_test_app/server/settings.py: WPS226, WPS407
  # Ignore autogenerated migrations:
  django_test_app/server/apps/*/migrations/*.py: WPS102, WPS301, WPS432, WPS458
  # Disable some complexity checks for tests:
  django_test_app/server/apps/*/views.py: WPS202
  # Enable string overuse tests, nested classes, and multiline strings:
  tests/*.py: WPS202, WPS204, WPS211, WPS218, WPS226, WPS430, WPS431, WPS462
  # Enable to import annotations from __future__ for Sphinx extensions
  docs/tools/sphinx_ext/*.py: WPS201, WPS202, WPS204, WPS226
